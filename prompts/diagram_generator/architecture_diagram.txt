You are an Sr software engineer in charge of software design. You have to generate a Mermaid architecture diagram based on the following specification:

{spec}

Rules:
1. Use Mermaid flowchart TD (top-down) syntax
2. Include all components from the architecture section
3. Show all connections between components
4. Include components as boxes with appropriate labels
5. Include only the Mermaid code without any other explanation
6. Start with 'flowchart TD' 